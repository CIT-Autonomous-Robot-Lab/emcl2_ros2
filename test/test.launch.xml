<launch>
  <set_env name="TURTLEBOT3_MODEL" value="burger"/>

  <arg name="params_file"   default="$(find-pkg-share emcl2)/config/emcl2_quick_start.param.yaml"/>
  <arg name="map"           default="$(find-pkg-share nav2_bringup)/maps/turtlebot3_world.yaml"/>
  <arg name="use_sim_time"  default="true"/>

  <include file="$(find-pkg-share turtlebot3_gazebo)/launch/turtlebot3_world.launch.py"/>

  <include file="$(find-pkg-share nav2_bringup)/launch/rviz_launch.py"/>

  <include file="$(find-pkg-share emcl2)/launch/emcl2.launch.py">
    <arg name="params_file"   value="$(var params_file)"/>
    <arg name="map"           value="$(var map)"/>
    <arg name="use_sim_time"  value="$(var use_sim_time)"/>
  </include>

  <include file="$(find-pkg-share nav2_bringup)/launch/navigation_launch.py">
    <arg name="use_sim_time"    value="$(var use_sim_time)"/>
  </include>

  <executable cmd="bash -c 'sleep 10; ros2 launch nav2_bringup navigation_launch.py use_sim_time:=true'" cwd="/" launch-prefix="" output="screen"/>
</launch>
